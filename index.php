<?php
  session_start();
  include_once $_SERVER["DOCUMENT_ROOT"].'/Premium-Air/Views/Layouts/header.php';
?>
<!-- header section ends    -->

<title> Inicio | Premium Air</title>

<!-- home section starts  -->
<section class="home" id="home">

   <div class="container">

      <div class="row align-items-center text-center text-md-left min-vh-100">
         <div class="col-md-6">
            <span>Air house</span>
            <h3>Start your day with our premium air</h3>
            <a href="#about" class="link-btn">get started</a>
         </div>
      </div>

   </div>

</section>

<!-- home section ends -->

<!-- about section starts  -->

<section class="about" id="about">

   <div class="container">

      <div class="row align-items-center">
         <div class="col-md-6">
            <img src="Util/images/about-img-1.jpg" class="w-100" alt="">
         </div>
         <div class="col-md-6">
            <span>Why choose us?</span>
            <h3 class="title">the best air in the world</h3>
            <p>Firstly, we use state-of-the-art air filtration systems that remove all impurities, pollutants, and allergens from the air. 
               This means that you won't be breathing in any harmful substances that could affect your health, 
               and you'll be able to enjoy a refreshing and rejuvenating shopping experience.</p>
            <a href="#menu" class="link-btn">Buy now</a>
            <div class="icons-container">
               <div class="icons">
                  <i class="fas fa-cloud"></i>
                  <h3>best air</h3>
               </div>
               <div class="icons">
                  <i class="fas fa-shipping-fast"></i>
                  <h3>free delivery</h3>
               </div>
               <div class="icons">
                  <i class="fas fa-headset"></i>
                  <h3>24/7 service</h3>
               </div>
            </div>
         </div>
      </div>

   </div>

</section>

<!-- about section ends -->

<!-- menu section starts  -->

<section class="menu" id="menu">

   <h1 class="heading"> Our air packs </h1>

   <div class="container box-container">

      <div class="box">
         <img src="Util/images/menu-10.png" alt="">
         <h3>Gucci Air</h3>
         <p>$1500 (Pesos Argentinos)</p>
         <a href="https://mpago.la/1FhtV3A" class="link-btn">Buy</a>
      </div>

      <div class="box">
         <img src="Util/images/menu-11.png" alt="">
         <h3>LV Air</h3>
         <p>$499 (Pesos Argentinos)</p>
         <a href="https://mpago.la/27vBbgX" class="link-btn">Buy</a>
      </div>

      <div class="box">
         <img src="Util/images/menu-7.png" alt="">
         <h3>Jordan Air</h3>
         <p>$27 (Pesos Argentinos)</p>
         <a href="https://mpago.la/2cJbNAd" class="link-btn" id="btn_buy">Buy</a>
      </div>

      <div class="box">
         <img src="Util/images/menu-1.png" alt="">
         <h3>Sun Air</h3>
         <p>$5 (Pesos Argentinos)</p>
         <a href="https://mpago.la/1bzagdA" class="link-btn">Buy</a>
      </div>

      <div class="box">
         <img src="Util/images/menu-8.png" alt="">
         <h3>Nuke Air</h3>
         <p>$31 (Pesos Argentinos)</p>
         <a href="https://mpago.la/1WjWVhR" class="link-btn" id="btn_buy">Buy</a>
      </div>

      <div class="box">
         <img src="Util/images/menu-2.png" alt="">
         <h3>Yellow Air</h3>
         <p>$7 (Pesos Argentinos)</p>
         <a href="https://mpago.la/2FipzhQ" class="link-btn" id="btn_buy">Buy</a>
      </div>

      <div class="box">
         <img src="Util/images/menu-9.png" alt="">
         <h3>Vegan Air</h3>
         <p>$11 (Pesos Argentinos)</p>
         <a href="https://mpago.la/1tgGjSf" class="link-btn" id="btn_buy">Buy</a>
      </div>

      <div class="box">
         <img src="Util/images/menu-3.png" alt="">
         <h3>Ice Air</h3>
         <p>$9 (Pesos Argentinos)</p>
         <a href="https://mpago.la/1KFvAVV" class="link-btn" id="btn_buy">Buy</a>
      </div>

      <div class="box">
         <img src="Util/images/menu-4.png" alt="">
         <h3>Air Coffee</h3>
         <p>$12 (Pesos Argentinos)</p>
         <a href="https://mpago.la/2sstRxG" class="link-btn" id="btn_buy">Buy</a>
      </div>

      <div class="box">
         <img src="Util/images/menu-5.png" alt="">
         <h3>Air of Nowhere</h3>
         <p>$2 (Pesos Argentinos)</p>
         <a href="https://mpago.la/27qUaWc" class="link-btn" id="btn_buy">Buy</a>
      </div>

      <div class="box">
         <img src="Util/images/menu-6.png" alt="">
         <h3>Eco Air</h3>
         <p>$6 (Pesos Argentinos)</p>
         <a href="https://mpago.la/2tUjU3k" class="link-btn" id="btn_buy">Buy</a>
      </div>
   </div>
</section>

<!-- menu section ends -->

<!-- blogs section starts  -->

<section class="blogs" id="blogs">

   <h1 class="heading"> Membership </h1>

   <div class="box-container container">

      <div class="box">
         <div class="image">
            <img src="Util/images/g-img-1.png" alt="">
         </div>
         <div class="content">
            <h3>Bronze</h3>
            <p>• 5% discount on all purchases <br>
               • Free shipping on orders over $50 <br>
               • Early access to select sales and promotions</p>
            <a href="https://www.mercadopago.com.ar/subscriptions/checkout?preapproval_plan_id=2c9380848731a87a0187362d17ad01af" class="link-btn">Susbribe</a>
         </div>
         <div class="icons">
            <span> <i class="fas fa-calendar"></i>2023 </span>
            <span> <i class="fas fa-user"></i> Benefit</span>
         </div>
      </div>

      <div class="box">
         <div class="image">
            <img src="Util/images/g-img-2.png" alt="">
         </div>
         <div class="content">
            <h3>Silver</h3>
            <p>• 10% discount on all purchases <br>
               • Free shipping on all orders <br>
               • Early access to all sales and promotions <br>
               • Personalized product recommendations based on shopping history <br>
               • Exclusive access to member-only events</p>
            <a href="https://www.mercadopago.com.ar/subscriptions/checkout?preapproval_plan_id=2c938084873215000187362daaee01ad" class="link-btn">Susbribe</a>
         </div>
         <div class="icons">
            <span> <i class="fas fa-calendar"></i>2023 </span>
            <span> <i class="fas fa-user"></i> Benefit</span>
         </div>
      </div>

      <div class="box">
         <div class="image">
            <img src="Util/images/g-img-3.png" alt="">
         </div>
         <div class="content">
            <h3>Gold</h3>
            <p>• 15% discount on all purchases <br>
               • Free expedited shipping on all orders <br>
               • Early access to all sales and promotions <br>
               • Personalized product recommendations based on shopping history <br>
               • Exclusive access to member-only events <br>
               • Dedicated customer service representative <br>
               • Complimentary gift wrapping on all purchases</p>
            <a href="https://www.mercadopago.com.ar/subscriptions/checkout?preapproval_plan_id=2c938084873215000187362e4e5d01ae" class="link-btn">Susbribe</a>
         </div>
         <div class="icons">
            <span> <i class="fas fa-calendar"></i>2023 </span>
            <span> <i class="fas fa-user"></i> Benefit</span>
         </div>
      </div>

   </div>

</section> 

<!-- blogs section ends -->

<!-- contact section starts  -->

<section class="contact" id="contact">

   <h1 class="heading"> contact us  </h1>

   <div class="container">

      <div class="contact-info-container">

         <div class="box">
            <i class="fas fa-phone"></i>
            <h3>phone</h3>
            <p>+123-456-7890</p>
            <p>+111-222-3333</p>
         </div>
   
         <div class="box">
            <i class="fas fa-envelope"></i>
            <h3>email</h3>
            <p>premiumair@gmail.com</p>
            <p>communityair@gmail.com</p>
         </div>
   
         <div class="box">
            <i class="fas fa-map"></i>
            <h3>address</h3>
            <p>44.244167, 7.769444</p>
         </div>
   
      </div>

      <div class="row align-items-center">

         <div class="col-md-6 mb-5 mb-md-0 ">
            <iframe class="map w-100" src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d4129.474970871109!2d-58.35081824992341!3d-52.01780106282612!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1ses!2sar!4v1680223597323!5m2!1ses!2sar" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
         </div>

         <form action="" class="col-md-6">
            <h3>get in touch</h3>
            <input type="text" placeholder="your name" class="box">
            <input type="email" placeholder="email" class="box">
            <input type="number" placeholder="phone" class="box">
            <textarea name="" placeholder="message" class="box" id="" cols="30" rows="10"></textarea>
            <input type="submit" value="send message" class="link-btn">
         </form>

      </div>

   </div>

</section>

<!-- contact section ends -->
<?php
  include_once $_SERVER["DOCUMENT_ROOT"].'/Premium-Air/Views/Layouts/footer.php';
?>

<script>
$(document).ready(function() {
    var funcion;
    // setTimeout(verificar_sesion, 2000);
    // Loader();
    verificar_sesion();
    toastr.options = {
      'debug': false,
      'positionClass': 'toast-top-right',
      'onclick': null,
      'fadeIn': 300,
      'fadeOut': 1000,
      'extendedTimeOut': 1000,
    }

    function llenar_menu_superior(usuario) {
      let template = ``;
      if(usuario===undefined || usuario == '' || usuario == null){
        template = `
        <li class="nav-item"> 
          <a class="nav-link" href="/Premium-Air/Views/register.php" role="button">
            <i class="fas fa-user-plus"></i> Registrarse
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/Premium-Air/Views/login.php" role="button">
            <i class="far fa-user"></i> Iniciar Sesion
          </a>
        </li>
        `;
      }
      else{
        template = `
         <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <img src="/Premium-Air/Util/Img/Users/${usuario.avatar}" width="30" height="30" class="img-fluid img-circle">
                <spa>${usuario.user}</span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                <li><a class="dropdown-item" href="/Premium-Air/Views/mi_perfil.php"><i class="fas fa-user-cog"></i> My profile</a></li>
                <li><a class="dropdown-item" href="#"><i class=F"fas fa-shopping-basket"></i> My orders</a></li>
                <li><a class="dropdown-item" href="/Premium-Air/Controllers/logout.php"><i class="fas fa-user-times"></i> Close session</a></li>
              </ul>
         </li>
        `;
      }
      // $('#loader_1').hide(500);
      $('#main_login').html(template);
    }

    async function verificar_sesion() {
      funcion = "verificar_sesion";
      let data = await fetch('/Premium-Air/Controllers/UsuarioController.php', {
        method:'POST',
        headers: {'Content-Type': 'application/x-www-form-urlencoded'},
        body: 'funcion=' + funcion
      });
      if(data.ok){
        let response = await data.text();
        console.log(response);
        try {
          if(response != ''){
          // location.href = '../index.php';
            let sesion = JSON.parse(response);
            console.log(sesion);
            llenar_menu_superior(sesion);
            // $('#avatar_menu').attr('src', '/commerce/Util/Img/Users/' + sesion.avatar);
            // $('usuario_menu').text(sesion.user);
            // obtener_contadores();
          } else {
            llenar_menu_superior();
          }
          // setTimeout(llenar_productos, 2000);
          // llenar_productos();
          // CloseLoader();
        } catch(error) {
          console.error(error);
          console.log(response);
        }
      } else {
        Swal.fire({
          icon: 'error',
          title: data.statusText,
          text: 'Hubo conflicto de codigo: ' + data.status,
        });
      }
    }

    /* ------------------------------------------ */
    /* Metododos Tal vez necesitamos en un Futuro */
    /* ------------------------------------------ */
    /*
    async function llenar_productos(){
      funcion = "llenar_productos";
      let data = await fetch('/commerce/Controllers/ProductoTiendaController.php', {
        method:'POST',
        headers: {'Content-Type': 'application/x-www-form-urlencoded'},
        body: 'funcion=' + funcion
      });
      if(data.ok){
        let response = await data.text();
        try {
          let productos =  JSON.parse(response);
          // console.log(productos);
          let template = ``;
          productos.forEach(producto => {
            template += `
                <div class="col-sm-2">
                  <div class="card">
                    <div class="card-body">
                      <div class="row">
                        <div class="col-sm-12">
                          <img src="/commerce/Util/Img/Producto/${producto.imagen}" class="img-fluid" alt="">
                        </div>
                        <div class="col-sm-12">
                          <span class="text-muted float-left">${producto.marca}</span></br>
                          <!-- Descripcion.php -> se le pasa el id y name del producto -->
                          <a class="titulo_producto" href="/commerce/Views/descripcion.php?name=${producto.producto}&&id=${producto.id}">${producto.producto}
                          </a>`;
                if(producto.envio == 'gratis'){
                  template += `</br>`;
                  template += `<span class="badge bg-success">Envio gratis</span>`;
                }
                if(producto.calificacion != 0){
                  template += `</br>`;
                  for(let index = 0; index < producto.calificacion; index++){
                    template += `<i class="fas fa-star text-warning"></i>`;
                  }
                  let estrellas_faltantes = 5 - producto.calificacion;
                  for(let index = 0; index < estrellas_faltantes; index++) {
                    template += `<i class="far fa-star text-warning"></i>`;
                  }
                  template += `</br>`;
                }
                if(producto.descuento != 0){
                  template += `
                  <span class="text-muted" style="text-decoration: line-through">S/ ${producto.precio}</span>
                  <span class="text-muted">-${producto.descuento}%</span></br>
                  `;
                }
                template += `
                          <h4 class="text-danger">S/ ${producto.precio_descuento}</h4>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
            `;
          });
          $('#loader_3').hide(500);
          $('#productos').html(template);
        } catch(error) {
          console.error(error);
          console.log(response);
        }
      } else {
        Swal.fire({
          icon: 'error',
          title: data.statusText,
          text: 'Hubo conflicto de codigo: ' + data.status,
        });
      }
    }

    async function obtener_contadores() {
      funcion = "obtener_contadores";
      let data = await fetch('/commerce/Controllers/UsuarioController.php', {
        method:'POST',
        headers: {'Content-Type': 'application/x-www-form-urlencoded'},
        body: 'funcion=' + funcion
      });
      if(data.ok){
        let response = await data.text();
        try {
          let contadores = JSON.parse(response);
          let template = ``;
          let template_1 = ``;
          if(contadores.contador_mensajes>0) {
            template = `
              <i class="fas fa-inbox"></i> Recibidos
              <span class="badge bg-warning float-right">${contadores.contador_mensajes}</span>
            `;
            template_1 = `Mensajes <span class="badge badge-warning right">${contadores.contador_mensajes}</span>`;
          } else {
            template = `
            <i class="fas fa-inbox"></i> Recibidos
            `;
            template_1 = `Mensajes`;
          }
          $('#recibidos').html(template);
          $('#nav_cont_mens').html(template_1);
        } catch(error) {
          console.error(error);
          console.log(response);
        }
      } else {
        Swal.fire({
          icon: 'error',
          title: data.statusText,
          text: 'Hubo conflicto de codigo: ' + data.status,
        });
      }
    }

    function Loader(mensaje){
      if(mensaje==''||mensaje==null){
        mensaje = 'Cargano datos...';
      }
      Swal.fire({
          position: 'center',
          html: '<i class="fas fa-2x fa-sync-alt fa-spin"></i>',
          title: mensaje,
          showConfirmButton: false
      });
    }

    function CloseLoader(mensaje, tipo){
      if(mensaje==''||mensaje==null){
        Swal.close();
      }
      else {
        Swal.fire({
            position: 'center',
            icon: tipo,
            title: mensaje,
            showConfirmButton: false
        });
      }
    }
    */
}) 
</script>